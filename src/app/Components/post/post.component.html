<main class="list-posts">
    <ul class="container">
        <li *ngIf="post">
            <figure>
                <img src="https://picsum.photos/600" alt="post photo">
                <div class="comment-panel">
                    <mat-icon *ngIf="this.likes&&!testLike()" class="pointer"
                        (click)="createLike()">favorite_border</mat-icon>
                    <mat-icon *ngIf="this.likes&&testLike()" class="pointer" (click)="deleteLike()">favorite</mat-icon>
                    <mat-icon (click)="isEditing(0,'post')" class="pointer">insert_comment</mat-icon>
                    <mat-icon *ngIf="!post.data.reported" class="pointer" (click)="reportPost(post)">info</mat-icon>
                    <mat-icon *ngIf="post.data.reported" style="color:black">info</mat-icon>
                    <h4>{{post.data.num_likes}} <span>Me gusta</span></h4>
                </div>
                <app-comment-form *ngIf="this.activePost" (handleSubmit)="
                createComment($event, post.data.id)">
                </app-comment-form>
                <figcaption>
                    <div class="author">
                        <cite>{{post.data.title}}</cite>
                        <div class="block">
                            <blockquote>
                                <p lang="es">
                                    {{post.data.description}}
                                </p>
                            </blockquote>
                            <p>{{post.user.name}}</p>
                        </div>
                    </div>
                </figcaption>
            </figure>
        </li>
    </ul>
    <ul class="container-li" *ngFor="let comment of comments; let i = index">
        <div class="comment-li">
            <li>
                <div class="right-li">
                    <mat-icon *ngIf="!comment.data.reported && comment.user.id == this.actual"
                        (click)="isEditing(comment.data.id,'comment')" class=" pointer">edit</mat-icon>
                    <mat-icon *ngIf="this.actual&&this.actual.admin||comment.user.id == this.actual"
                        (click)="delete(comment.data.id,i)" class="pointer">delete</mat-icon>

                    <mat-icon *ngIf="!comment.data.reported" class="pointer"
                        (click)="reportComment(comment,i)">info</mat-icon>
                    <mat-icon *ngIf="comment.data.reported" style="color:black">info</mat-icon>
                </div>
                <div class="left-li">
                    <mat-icon>person</mat-icon>
                </div>
                <div>
                    <h2>{{comment.user.name}}</h2>
                    <p>{{comment.data.content}} </p>
                    <app-comment-form *ngIf="this.activeComment === comment.data.id"
                        [initialText]="comment.data.content" (handleSubmit)="
                        updateComment($event, comment.data)">
                    </app-comment-form>
                </div>
        </div>
    </ul>
</main>
